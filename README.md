# bet-maker

## Описание

Данный микросервис позволяет взаимодействовать с БД bets, в которой хранятся данные о ставка, а также 
получение данных с микросервиса событий. Предполагается, что это основной юек микросервис для взаимодействия с клиентом
Я разделил docker compose на 2 разных файла. Это связано с тем, что с БД чаще всего связаны и другие 
микросервисы, поэтому при тестировке и внесению фичей в этот микросервис, это не должно ронять БД

## Установка 

Скачайте репозиторий командой 
`git clone https://github.com/betting-software/bet_maker`

Добавьте в корень проекта папку config и положите туда файл conf.env. 
Вот пример данных в файле conf.env

```
DB_HOST = "postgres-bets"
DB_PORT = 5432
DB_NAME = "bets"
DB_USERNAME = "postgres"
DB_PASSWORD = "postgres"
DB_TABLE_NAME = "bets"

POSTGRES_DB = "bets"
POSTGRES_USER = "postgres"
POSTGRES_PASSWORD = "postgres"

LINE_PROVIDER_URL = "http://line-provider:8000"
```

Запустите контейнер с БД bets
`docker compose -f docker-compose-postgres.yaml up`

Далее запустите контейнер с микросервисом
`docker compose -f docker-compose-core.yaml up`

После этой команды должны пройти миграции и все должно запутситься.

## Описание точек

Перейдите на свагер http://localhost:9056/docs#/

Там я реализовал 4 точки
1. /events - получение всех неоконченных событий (тянется с другого микросервиса)
2. /bet - создание ставки на событие
3. /bets - просмотреть все сделанные ставки
4. /update_bet - Обновление статуса ставки, когда событие прошло (запрос приходит с другого микросервиса)


